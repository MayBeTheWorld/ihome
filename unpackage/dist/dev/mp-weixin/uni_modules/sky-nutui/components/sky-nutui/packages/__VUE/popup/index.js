"use strict";const o=require("../../../../../../../common/vendor.js"),N=require("./use-lock-scroll.js"),O=require("../overlay/props.js"),z=require("../../utils/create/component.js");require("../../locale/index.js");require("../../locale/lang/zh-CN.js");require("../../locale/lang/baseLang.js");require("../../locale/lang/en-US.js");require("../../utils/util.js");const d=()=>"../overlay/index.js",p=()=>"../icon/index.js",{componentName:$,create:g}=z.createComponent("popup");let y=2e3;const h={...O.overlayProps,position:{type:String,default:"center"},transition:String,style:{type:Object},popStyle:{type:Object},popClass:{type:String,default:""},closeable:{type:Boolean,default:!1},closeIconPosition:{type:String,default:"top-right"},closeIcon:{type:String,default:"close"},destroyOnClose:{type:Boolean,default:!0},teleport:{type:[String],default:"body"},overlay:{type:Boolean,default:!0},round:{type:Boolean,default:!1},isWrapTeleport:{type:Boolean,default:!1},safeAreaInsetBottom:{type:Boolean,default:!1}},w=g({components:{[d.name]:d,[p.name]:p},props:{...h},emits:["click","click-close-icon","open","close","opend","closed","update:visible","click-overlay"],options:{virtualHost:!0},setup(e,{emit:s}){const t=o.inject("lockPage",n=>{},!1),c=o.ref(),l=o.reactive({zIndex:e.zIndex,showSlot:!0,transitionName:`popup-fade-${e.position}`,slideTransitionName:`nut-slide-${e.position}`,overLayCount:1,keepAlive:!1,closed:e.closeable}),a=o.ref(!1),[i,v]=N.useLockScroll(()=>e.lockScroll),k=o.computed$1(()=>({[$]:!0,round:e.round,[`popup-${e.position}`]:!0,[`popup-${e.position}--safebottom`]:e.position==="bottom"&&e.safeAreaInsetBottom,[e.popClass]:!0,[`${l.slideTransitionName}In`]:a.value,[`${l.slideTransitionName}Out`]:!a.value})),f=o.computed$1(()=>({zIndex:l.zIndex,animationDuration:e.duration?`${e.duration}s`:"initial",...e.popStyle})),u=()=>{e.zIndex!=2e3&&(y=Number(e.zIndex)),a.value=!0,s("update:visible",!0),t(!0),l.zIndex=++y,e.destroyOnClose&&(l.showSlot=!0),s("open")},r=()=>{t(!1),a.value=!1,setTimeout(()=>{s("update:visible",!1)},+e.duration*1e3),e.destroyOnClose&&setTimeout(()=>{l.showSlot=!1,s("close")},+e.duration*1e3)},m=n=>{s("click",n)},C=n=>{s("click-close-icon",n),r()},S=n=>{e.closeOnClickOverlay&&(s("click-overlay",n),r())},b=n=>{s("opend",n)},I=n=>{s("closed",n)};return o.onMounted(()=>{e.transition?l.transitionName=e.transition:l.transitionName=`popup-slide-${e.position}`,e.visible&&u()}),o.onBeforeUnmount(()=>{e.visible&&r()}),o.onBeforeMount(()=>{e.visible&&v()}),o.onActivated(()=>{l.keepAlive&&(s("update:visible",!0),l.keepAlive=!1)}),o.onDeactivated(()=>{e.visible&&(r(),l.keepAlive=!0)}),o.watch(()=>e.visible,n=>{n?u():r()}),o.watch(()=>e.position,n=>{n==="center"?l.transitionName="popup-fade":l.transitionName=`popup-slide-${n}`}),o.watch(()=>e.closeable,n=>{l.closed=n}),{...o.toRefs(l),popStyle:f,classes:k,onClick:m,onClickCloseIcon:C,onClickOverlay:S,onOpened:b,onClosed:I,popupRef:c}}});if(!Array){const e=o.resolveComponent("nut-overlay"),s=o.resolveComponent("nut-icon"),t=o.resolveComponent("Transition");(e+s+t)()}const B=()=>"../overlay/index.js",q=()=>"../icon/index.js";Math||(B+q)();function T(e,s,t,c,l,a){return o.e({a:e.isWrapTeleport},e.isWrapTeleport?o.e({b:e.overlay},e.overlay?{c:o.o(e.onClickOverlay),d:o.p({visible:e.visible,["close-on-click-overlay"]:e.closeOnClickOverlay,overlayClass:e.overlayClass,overlayStyle:e.overlayStyle,["z-index"]:e.zIndex,["lock-scroll"]:e.lockScroll,duration:e.duration})}:{},{e:e.showSlot},e.showSlot?{}:{},{f:e.closed},e.closed?{g:o.p({name:e.closeIcon,size:"12px"}),h:o.o((...i)=>e.onClickCloseIcon&&e.onClickCloseIcon(...i)),i:o.n("nutui-popup__close-icon--"+e.closeIconPosition)}:{},{j:e.visible,k:o.n(e.classes),l:o.s(e.popStyle),m:o.o((...i)=>e.onClick&&e.onClick(...i)),n:o.o(e.onOpened),o:o.o(e.onClosed),p:o.p({name:e.transitionName})}):o.e({q:e.overlay},e.overlay?{r:o.o(e.onClickOverlay),s:o.p({visible:e.visible,["close-on-click-overlay"]:e.closeOnClickOverlay,overlayClass:e.overlayClass,overlayStyle:e.overlayStyle,["z-index"]:e.zIndex,["lock-scroll"]:e.lockScroll,duration:e.duration})}:{},{t:e.showSlot},e.showSlot?{}:{},{v:e.closed},e.closed?{w:o.p({name:e.closeIcon,size:"12px"}),x:o.o((...i)=>e.onClickCloseIcon&&e.onClickCloseIcon(...i)),y:o.n("nutui-popup__close-icon--"+e.closeIconPosition)}:{},{z:e.visible,A:o.n(e.classes),B:o.s(e.popStyle),C:o.o((...i)=>e.onClick&&e.onClick(...i)),D:o.o(e.onOpened),E:o.o(e.onClosed),F:o.p({name:e.transitionName})}))}const j=o._export_sfc(w,[["render",T],["__file","D:/Projects/爱佳装/uni_modules/sky-nutui/components/sky-nutui/packages/__VUE/popup/index.vue"]]);wx.createComponent(j);
